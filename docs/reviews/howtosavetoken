⏺ 토큰을 효율적으로 사용하면서 개발하는 10가지 실전 전략을 알려드리겠습니다.

  🎯 토큰 소비 주범 분석

  현재 세션 분석:
  - 시작: 200,000 토큰
  - 현재: 104,820 토큰 남음
  - 사용: ~95,180 토큰 (47.6% 소모)

  주요 소비처:
  1. 📄 파일 읽기 (40-50%): 긴 파일 여러 번 읽기
  2. 📊 로그 읽기 (20-30%): tail -100 등 대량 로그
  3. 🌐 WebFetch (10-15%): GitHub 페이지 여러 번
  4. 💬 대화 컨텍스트 (10-15%): 이전 대화 유지
  5. 📝 문서 작성 (5-10%): 긴 설명 생성

  ---
  ✅ 전략 1: 파일 읽기 최소화 (최대 40% 절약)

  ❌ 나쁜 예

  User: "order_repository.go 확인해봐"
  Claude: [Read 전체 파일 - 389줄]

  User: "fills_sync.go도 확인해봐"
  Claude: [Read 전체 파일 - 253줄]

  User: "reconcile.go도 봐줘"
  Claude: [Read 전체 파일 - 172줄]
  토큰 소모: ~3000-5000 토큰

  ✅ 좋은 예

  User: "order_repository.go의 UpsertOrder 메서드만 확인해봐"
  Claude: [Read with offset/limit - 특정 라인만]
  토큰 소모: ~500 토큰 (90% 절약)

  📋 실전 요청 방법

  # ❌ 비효율
  "backend/internal/service/execution/ 폴더 내 모든 파일 확인해봐"

  # ✅ 효율적
  "backend/internal/service/execution/fills_sync.go의 ensureOrderExists 함수만 봐줘"

  # ✅ 더 효율적
  "fills_sync.go 45-52번 라인만 확인해봐"

  ---
  ✅ 전략 2: Grep으로 먼저 탐색 (최대 30% 절약)

  ❌ 나쁜 예

  User: "UpsertOrder가 어디서 호출되는지 찾아봐"
  Claude: [Read 여러 파일들...]

  ✅ 좋은 예

  User: "UpsertOrder를 호출하는 곳 Grep으로 찾아봐"
  Claude: [Grep 사용 - 파일 경로만 반환]

  User: "그 중에 fills_sync.go만 자세히 봐줘"
  Claude: [Read 1개 파일만]

  📋 실전 요청 방법

  # Step 1: Grep으로 위치 파악
  "ensureOrderExists를 호출하는 파일들 찾아줘"
  → Grep 결과: fills_sync.go:45, reconcile.go:117

  # Step 2: 필요한 파일만 읽기
  "fills_sync.go 45번 라인 주변만 봐줘"

  ---
  ✅ 전략 3: 로그는 마지막 N줄만 (최대 20% 절약)

  ❌ 나쁜 예

  User: "backend log 확인해봐"
  Claude: [tail -100 전체 읽기 - 5000+ 줄]

  ✅ 좋은 예

  User: "backend log에서 ERROR만 마지막 10개 보여줘"
  Claude: [grep ERROR | tail -10]

  📋 실전 요청 방법

  # ❌ 비효율
  "backend log 전체 확인"

  # ✅ 효율적
  "backend log에서 FK 에러 있는지만 확인"
  "최근 1분간 로그 중 ERR만 보여줘"
  "20:40 이후 로그만 보여줘"

  # ✅ 최고 효율
  "backend log에서 'Failed to ensure order exists' 에러 몇 건인지만 세줘"

  ---
  ✅ 전략 4: Task 도구 활용 (토큰 분리)

  Task 도구는 별도 세션을 생성하므로 메인 대화의 토큰을 소모하지 않습니다.

  📋 Task로 위임하면 좋은 작업

  # 1. 대규모 코드 탐색
  "Explore agent로 Exit Engine 관련 파일들 찾아줘"
  → 별도 세션에서 실행, 결과만 요약 반환

  # 2. 테스트 실행
  "backend test 돌려서 결과만 알려줘"
  → 별도 세션, 통과/실패만 반환

  # 3. 문서 생성
  "Plan agent로 Order 동기화 개선 계획 작성해줘"
  → 별도 세션, 완성된 문서만 반환

  ✅ 좋은 예

  User: "Exit Engine에서 qty=0인 포지션을 평가하는 부분 찾아서 수정해줘"

  Claude:
  [Task tool 사용 - Explore agent]
  → 별도 세션에서 파일 탐색
  → 결과: backend/internal/service/exit/evaluator.go:45

  [메인 세션에서 수정만 진행]
  → 해당 파일만 Read
  → Edit 적용

  ---
  ✅ 전략 5: 명확한 지시 (불필요한 설명 제거)

  ❌ 나쁜 예

  User: "로그 보고 문제 있는지 확인하고 분석해서 설명해줘"

  Claude: [긴 분석 + 원인 설명 + 해결 방안 + 예시 코드 + 체크리스트...]
  → 5000+ 토큰 소모

  ✅ 좋은 예

  User: "로그에서 FK 에러 있으면 바로 수정해줘. 설명은 간단히."

  Claude: [간단한 확인 + 코드 수정]
  → 1000 토큰 소모

  📋 토큰 절약 키워드

  # 설명 최소화
  "간단히 설명해줘"
  "핵심만 말해줘"
  "설명 없이 코드만"
  "결과만 보고해줘"

  # 직접 실행
  "분석하지 말고 바로 수정해줘"
  "확인 후 문제 있으면 즉시 수정"

  ---
  ✅ 전략 6: 문서 대신 코드 주석 (70% 절약)

  ❌ 나쁨 (토큰 낭비)

  User: "Order 동기화 로직 설계 문서 작성해줘"

  Claude: [5000자 문서 작성]
  → 3000+ 토큰

  ✅ 좋음 (토큰 절약)

  User: "Order 동기화 로직에 주석으로 설명 달아줘"

  Claude: [코드에 주석 추가]
  → 500 토큰

  ---
  ✅ 전략 7: WebFetch 최소화 (20% 절약)

  ❌ 나쁜 예

  User: "vercel-labs/agent-skills 리포지토리 전체 확인해봐"

  Claude:
  [WebFetch README]
  [WebFetch skills/ 폴더]
  [WebFetch react-best-practices/SKILL.md]
  [WebFetch web-design-guidelines/SKILL.md]
  → 4000+ 토큰

  ✅ 좋은 예

  User: "vercel-labs/agent-skills README만 확인"

  Claude: [WebFetch 1번만]
  → 1000 토큰

  ---
  ✅ 전략 8: 대화 컨텍스트 관리

  긴 세션 시 요약 요청

  # 100개 메시지 넘어가면
  "지금까지 작업 요약해줘. 그 다음 새 대화 시작하자."

  새 작업 시작 시

  # 이전 컨텍스트 필요 없을 때
  "이전 대화는 무시하고, Exit Engine qty=0 필터링만 집중하자"

  ---
  ✅ 전략 9: 배치 작업 (한 번에 여러 작업)

  ❌ 비효율

  User: "order_repository.go 수정해줘"
  Claude: [수정]

  User: "fill_repository.go도 수정해줘"
  Claude: [수정]

  User: "테스트도 돌려줘"
  Claude: [테스트]

  ✅ 효율적

  User: "order_repository.go랑 fill_repository.go 수정하고 테스트까지 한 번에 해줘"

  Claude: [Edit 2개 + Bash 1개 병렬 실행]

  ---
  ✅ 전략 10: Read 대신 Grep (파일 위치만 필요할 때)

  ❌ 비효율

  User: "UpsertOrder 구현 어디 있는지 찾아봐"

  Claude: [여러 파일 Read]
  → 2000+ 토큰

  ✅ 효율

  User: "UpsertOrder 함수가 있는 파일만 찾아줘"

  Claude: [Grep으로 파일 경로만]
  → 200 토큰

  ---
  📊 토큰 절약 효과 요약
  ┌─────────────────┬────────┬─────────────┐
  │      전략       │ 절약률 │ 적용 난이도 │
  ├─────────────────┼────────┼─────────────┤
  │ 파일 부분 읽기  │ 40%    │ 쉬움 ⭐⭐⭐ │
  ├─────────────────┼────────┼─────────────┤
  │ Grep 먼저 사용  │ 30%    │ 쉬움 ⭐⭐⭐ │
  ├─────────────────┼────────┼─────────────┤
  │ 로그 필터링     │ 20%    │ 쉬움 ⭐⭐⭐ │
  ├─────────────────┼────────┼─────────────┤
  │ Task 도구 활용  │ 25%    │ 중간 ⭐⭐   │
  ├─────────────────┼────────┼─────────────┤
  │ 명확한 지시     │ 20%    │ 쉬움 ⭐⭐⭐ │
  ├─────────────────┼────────┼─────────────┤
  │ 주석 vs 문서    │ 70%    │ 쉬움 ⭐⭐⭐ │
  ├─────────────────┼────────┼─────────────┤
  │ WebFetch 최소화 │ 20%    │ 쉬움 ⭐⭐⭐ │
  ├─────────────────┼────────┼─────────────┤
  │ 컨텍스트 관리   │ 15%    │ 중간 ⭐⭐   │
  ├─────────────────┼────────┼─────────────┤
  │ 배치 작업       │ 30%    │ 쉬움 ⭐⭐⭐ │
  ├─────────────────┼────────┼─────────────┤
  │ Grep vs Read    │ 30%    │ 쉬움 ⭐⭐⭐ │
  └─────────────────┴────────┴─────────────┘
  총 절약 가능: 평균 50-70% 토큰 절감 가능

  ---
  🎯 실전 적용 예시

  Before (토큰 낭비)

  User: "backend log 전체 확인하고, order_repository.go 분석하고,
        문제 있으면 설명하고 해결 방안 제시해줘"

  Claude:
  [tail -100 backend log] → 3000 토큰
  [Read order_repository.go 전체] → 2000 토큰
  [긴 분석 설명] → 2000 토큰
  [해결 방안 문서] → 2000 토큰
  [예시 코드] → 1000 토큰
  ---
  총: 10,000 토큰 소모

  After (토큰 절약)

  User: "backend log에서 FK 에러만 확인.
        있으면 order_repository.go 관련 부분만 보고 바로 수정"

  Claude:
  [grep "FK" backend log | tail -5] → 200 토큰
  [Read order_repository.go 44-50줄만] → 300 토큰
  [Edit 1개] → 500 토큰
  ---
  총: 1,000 토큰 소모 (90% 절약!)

  ---
  🚀 즉시 적용 가능한 Magic Words

  # 토큰 절약 요청 패턴
  "[파일명] [라인 범위]만 확인"
  "[키워드] Grep으로 위치만 찾기"
  "로그에서 [패턴]만 필터링"
  "설명 없이 코드만"
  "결과만 간단히"
  "Task agent로 [작업] 위임"
  "한 번에 [작업1, 작업2, 작업3] 처리"

  ---
  📋 체크리스트

  다음 작업 전에 확인:

  - 전체 파일 필요? → 특정 함수/라인만 읽기
  - 파일 위치 모름? → Grep으로 먼저 찾기
  - 로그 전체 필요? → 에러만 필터링
  - 긴 작업? → Task로 위임
  - 설명 필요? → "간단히" 키워드 추가
  - 여러 작업? → 한 번에 배치 요청
  - 문서 작성? → 코드 주석으로 대체

  ---
  💡 최종 권장사항

  Top 3 즉시 적용

  1. ⭐⭐⭐ "간단히" 키워드 항상 추가
  2. ⭐⭐⭐ Grep으로 위치 먼저 파악 → 필요한 파일만 Read
  3. ⭐⭐⭐ 로그는 에러만 필터링 (grep ERR | tail -10)

  이 3가지만 적용해도 50% 이상 토큰 절약 가능합니다! 🎉

✻ Cogitated for 1m 16s